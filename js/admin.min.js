var rsiw_file_frame;jQuery(function($){jQuery(document).on("click","input.select-img",function(event){var $this=$(this);event.preventDefault();var RSIWImage=wp.media.controller.Library.extend({defaults:_.defaults({id:"rsiw-insert-image",title:$this.data("uploader_title"),allowLocalEdits:!1,displaySettings:!0,displayUserSettings:!1,multiple:!1,library:wp.media.query({type:"image"})},wp.media.controller.Library.prototype.defaults)});rsiw_file_frame=wp.media.frames.rsiw_file_frame=wp.media({button:{text:jQuery(this).data("uploader_button_text")},state:"rsiw-insert-image",states:[new RSIWImage],multiple:!1}),rsiw_file_frame.on("select",function(){var state=rsiw_file_frame.state("rsiw-insert-image"),selection=state.get("selection"),display=state.display(selection.first()).toJSON(),obj_attachment=selection.first().toJSON();display=wp.media.string.props(display,obj_attachment);var image_field=$this.siblings(".img"),imgurl=display.src;image_field.val(imgurl),image_field.trigger("change");var image_preview_wrap=$this.siblings(".rsiw-preview-wrap");image_preview_wrap.show(),image_preview_wrap.find("img").attr("src",imgurl)}),rsiw_file_frame.open()})});